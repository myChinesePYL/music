<!DOCTYPE html>
<html lang="zh_CN" x-data="{
    exitBox: true,
    start: false,
    played: false,
    play_name: ''
}" x-module="played" x-on:mousedown="if(exitBox==true){start=false}">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My music</title>
    <!-- style file -->
    <link rel="stylesheet" type="text/css" href="./style.css">
    <!-- js  -->
    <script src="./alpine.js" defer></script>
    <script src="./jquery.js"></script>

    <script>
        var temp=document.createElement('audio');
        var music_list=["./src_music/黒皇帝 - Galaxy Collapse.mp3","./src_music/red zone.mp3"];
        var img_list=["./src_png/黒皇帝 - Galaxy Collapse.jpg","./src_png/red zone.jpeg"]
        var ID=0;

        function play_music(numberID,el) {
          ID=numberID;
            // set img src
            $('#music_png')[0].src=img_list[ID];
            // add music and play music
            temp.src=music_list[ID];
            temp.volume=1;
            temp.onplay=function(){$('#ed')[0].src='./svg/music_play.svg';document.documentElement.__x.$data.played=true;};
            temp.onpause=function(){$('#ed')[0].src='./svg/music_stop.svg';document.documentElement.__x.$data.played=false;};
            temp.preload="auto";

            // temp.muted=true;
            temp.play();
            document.documentElement.__x.$data.play_name=el;
        }
        function playAndPause() {
            if(!temp.src){
                return false;
            }

            if(temp.paused){
                temp.play();
            }else{
                temp.pause();
            }
        }
    </script>
</head>
<body>
	<!-- load music(只是单纯加载) -->
    <audio src="./src_music/黒皇帝 - Galaxy Collapse.mp3" load="auto"></audio>
    <audio src="./src_music/red zone.mp3" load="auto"></audio>
    <!-- music home -->
    <div id="home">
        <button id="a" x-on:mouseup="play_music(0,$('#a')[0])" x-bind:musiced="played && play_name==$('#a')[0] ? 'true' : 'false'" >黒皇帝 - Galaxy Collapse</button>
        <button id="b" x-on:mouseup="play_music(1,$('#b')[0])" x-bind:musiced="played && play_name==$('#b')[0] ? 'true' : 'false'" >red zone(简称蓝屏钙)</button>
    </div>

    <!-- control -->
    <div id="control">
        <img loading="eager" style="transform: scale(0.8);-webkit-transform: scale(0.8)" id="music_png" src="./svg/notPlayMusic.svg" width="100" height="100">

        <!-- music control -->
        <div id="control_music">
            <img loading="eager" x-on:mouseup="if(ID > 0 ){play_music(ID-1,$('#home > *')[ID-1])}" src="./svg/upDownMusic.svg" width="100" height="100">
            <img loading="eager" src="./svg/music_stop.svg" width="100" height="100" id="ed" x-on:mouseup="playAndPause()">
            <img loading="eager" x-on:mouseup="if(ID < music_list.length-1 ){play_music(ID+1,$('#home > *')[ID+1])}" src="./svg/upDownMusic.svg" style="-webkit-transform: rotate(180deg) translateX(-10px);transform: rotate(180deg) translateX(-10px);" width="100" height="100">
        </div>

        <!-- music setting -->
        <div id="setting" x-module="start" x-on:mouseup="start=true" x-bind:class="start ? 'settingStart' : undefined" x-on:mouseleave="exitBox=true" x-on:mouseover="exitBox=false">

            <!-- setting box -->
            <div x-show="start">
                <button x-on:mouseup="location.reload();" style="grid-area: reload;">reload</button>
                <input type="range" id="volume" max="100" min="0" value="100" x-on:input="temp.volume=$('#volume')[0].value * 0.01"><span style="position: relative;bottom: 15px;left: 10px;font-size: 15px;border: 0px;">volume</span>
            </div>

            <!-- setting image -->
            <img loading="eager" src="./svg/settings.svg" x-show="!start" width="100" height="100" id="settings">
        </div>
    </div>
</body>
</html>